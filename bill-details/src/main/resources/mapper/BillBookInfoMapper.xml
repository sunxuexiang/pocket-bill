<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cloudfly.start.bill.mapper.BillBookInfoMapper">

    <select id="queryBillByUserId" parameterType="com.cloudfly.start.bill.entity.BillBookInfo" resultType="java.util.List">
        select book.book_name as bookName,
        book.create_date as createDate,
        book.book_id as bookId,share.book_type as bookType from  bill_share share
        inner join bill_book book on share.share_book_id = book.book_id
        where user.user_id = ${userId}
    </select>



    <select id="queryBillDetailsCustomize" parameterType="com.cloudfly.start.bill.entity.BillBookInfo" resultType="java.util.List">
        select bbi.info_id infoId,
               bbi.book_id bookId,
               bbi.user_id userId,
               bbi.pay_id payId,
               bbi.type_id typeId,
               bbi.info_money infoMoney,
               bbi.info_pay_type infoPayType,
               bbi.info_date infoDate
        from bill_book_Info bbi
        where bbi.book_id=#{bookId};
        <if test="#{userId} != null">
            and bbi.user_id=#{userId,jdbcType=INTEGER}
        </if>
        <if test="#{infoDate} != null">
            and bbi.info_date=#{infoDate}
        </if>
        <if test="#{infoMonty} != null">
            and bbi.info_money=#{infoMonty,jdbcType=NUMERIC}
        </if>
    </select>
</mapper>