<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cloudfly.start.bill.mapper.BillBookMapper">

    <select id="queryBillByUserId" resultType="java.util.List" parameterType="java.lang.Integer">
        select book.book_name as bookName,
        book.create_date as createDate,
        book.book_id as bookId,share.book_type as bookType from  bill_share share
        inner join bill_book book on share.share_book_id = book.book_id
        where user.user_id = ${userId}
    </select>

    <select id="queryDefaultBillByUserId" parameterType="java.lang.Integer" resultType="com.cloudfly.start.bill.entity.BillBook">
        select bb.user_id userId,
               bb.book_id bookId,
               bb.book_name bookName
        from bill_book bb
        where bb.userId=#{userId,jdbcType=INTEGER}
        and bb.is_default=1
    </select>
</mapper>